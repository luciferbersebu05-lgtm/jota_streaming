<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Jota Streaming</title>
    <link rel="icon" type="image/x-icon" href="static/img/favicon.ico">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
        const SUPABASE_URL = 'https://sprraxgaqivlayzrhqqz.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNwcnJheGdhcWl2bGF5enJocXF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg0NzEyNzksImV4cCI6MjA3NDA0NzI3OX0.Gsi_h090KK_GPKOCDg_4S6nx6QyDHbEF7teg9IJhNlw';
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        (async () => {
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
                // Si no hay sesión, lo redirige a la página principal
                window.location.replace("index.html");
            }
        })();
    </script>

    <div id="toast-container"></div>

    <header>
        <nav>
            <a href="index.html" class="logo-container">
                <img src="static/img/logo.png" alt="Jota Streaming Logo" class="logo-img">
                <span>Jota Streaming</span>
            </a>
            <ul id="nav-links" class="nav-links"></ul>
        </nav>
    </header>

    <main class="dashboard-main">
        <section class="hero-slider-container">
            <div class="hero-slider">
                
                <div class="slide">
                    <div class="slide-background" style="background-image: url('static/img/pelicula1.png');"></div>
                    <img class="slide-foreground" src="static/img/pelicula1.png" alt="Banner de Merlina">
                </div>

                <div class="slide">
                    <div class="slide-background" style="background-image: url('static/img/pelicula2.png');"></div>
                    <img class="slide-foreground" src="static/img/pelicula2.png" alt="Banner de Chespirito">
                </div>
            </div>
            <button class="slider-btn prev-btn">‹</button>
            <button class="slider-btn next-btn">›</button>
        </section>

        <section class="horizontal-scroll-section">
            <h2>Nuestros Servicios</h2>
            <div class="horizontal-scroll-container">
                
                <a href="#" class="service-card-horizontal" data-service="Jota Streaming">
                    <img src="static/img/logo.png" alt="Jota Streaming">
                </a>
                
                <a href="#" class="service-card-horizontal" data-service="Netflix">
                    <img src="static/img/netflix.png" alt="Netflix">
                </a>
                <a href="#" class="service-card-horizontal" data-service="HBO Max">
                    <img src="static/img/hbo.png" alt="HBO Max">
                </a>
                <a href="#" class="service-card-horizontal" data-service="Disney+">
                    <img src="static/img/disney.png" alt="Disney+">
                </a>
                <a href="#" class="service-card-horizontal" data-service="ChatGPT">
                    <img src="static/img/chatgpt.png" alt="ChatGPT">
                </a>
                <a href="#" class="service-card-horizontal" data-service="Crunchyroll">
                    <img src="static/img/crunchyroll.png" alt="Crunchyroll">
                </a>
                <a href="#" class="service-card-horizontal" data-service="Prime Video">
                    <img src="static/img/primevideo.png" alt="Prime Video">
                </a>
                <a href="#" class="service-card-horizontal" data-service="YouTube Premium">
                    <img src="static/img/yt.png" alt="YouTube Premium">
                </a>
            </div>
        </section>

        <section id="product-display-section" class="products-main" style="display: none;">
            <div class="products-container">
                
                <aside class="filters-sidebar">
                    <h3>Categorías</h3>
                    <ul class="filter-list">
                        <li><a href="#" class="active">Todos los Productos</a></li>
                        <li><a href="#">Cuentas Completas</a></li>
                        <li><a href="#">Perfiles</a></li>
                        <li><a href="#">Renovaciones</a></li>
                        <li><a href="#">Combos</a></li>
                    </ul>
                    <h3>Duración</h3>
                     <ul class="filter-list">
                        <li><a href="#">7 días</a></li>
                        <li><a href="#">1 mes</a></li>
                        <li><a href="#">3 meses</a></li>
                        <li><a href="#">1 año</a></li>
                    </ul>
                </aside>

                <section class="products-grid-container">
                    <div class="products-header">
                        <h2 id="service-product-title"></h2>
                        <div class="search-bar">
                            <input type="text" placeholder="Buscar...">
                            <button>Buscar</button>
                        </div>
                    </div>

                    <div id="products-grid" class="products-grid">
                        
                        <div class="product-card">
                            <div class="card-img-container">
                                <img src="https://i.pinimg.com/originals/a9/c2/92/a9c292f75b1e15918a55b355a1278183.jpg" alt="Producto Netflix">
                                <span class="service-tag netflix-tag">NETFLIX</span>
                            </div>
                            <div class="card-content">
                                <h3 class="product-title">Perfil Mensual Full HD</h3>
                                <p class="seller-info">Vendido por: <strong>YarexZJ</strong></p>
                                <div class="price-stock-info">
                                    <span class="price">S/ 9.90</span>
                                    <span class="stock">Quedan 5</span>
                                </div>
                                <button class="buy-btn">Comprar Ahora</button>
                            </div>
                        </div>

                        <div class="product-card">
                             <div class="card-img-container">
                                <img src="https://i.pinimg.com/736x/2b/ff/4d/2bff4d54a2b975a2f854687a74442a8d.jpg" alt="Producto Netflix">
                                 <span class="service-tag netflix-tag">NETFLIX</span>
                            </div>
                            <div class="card-content">
                                <h3 class="product-title">Cuenta Completa 1 Mes 4K</h3>
                                 <p class="seller-info">Vendido por: <strong>JotaStore</strong></p>
                                <div class="price-stock-info">
                                    <span class="price">S/ 25.50</span>
                                    <span class="stock">Quedan 2</span>
                                </div>
                                <button class="buy-btn">Comprar Ahora</button>
                            </div>
                        </div>

                        <div class="product-card">
                             <div class="card-img-container">
                                <img src="https://i.pinimg.com/originals/d7/21/50/d721503c8075e7a25695328994514a38.jpg" alt="Producto Netflix">
                                 <span class="service-tag netflix-tag">NETFLIX</span>
                            </div>
                            <div class="card-content">
                                <h3 class="product-title">Cuenta por 7 Días</h3>
                                 <p class="seller-info">Vendido por: <strong>YarexZJ</strong></p>
                                <div class="price-stock-info">
                                    <span class="price">S/ 5.00</span>
                                    <span class="stock">Quedan 12</span>
                                </div>
                                <button class="buy-btn">Comprar Ahora</button>
                            </div>
                        </div>

                    </div>
                </section>
            </div>
        </section>
    </main>
    
    <footer>
        <p>© 2025 Jota Streaming. Todos los derechos reservados.</p>

        <div id="user-menu-dropdown" class="user-menu-dropdown">
        <div class="menu-profile-header">
            <img src="static/img/default-avatar.png" alt="Foto de perfil">
            <h4 class="username" id="menu-username">Cargando...</h4>
            <span class="user-role" id="menu-user-role">Comprador</span>
        </div>
        <ul class="menu-options">
            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                    <span>Editar perfil</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <span>Mis referidos</span>
                </a>
            </li>
            <li>
                <a href="#" id="logout-btn-menu" class="logout-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                    <span>Cerrar sesión</span>
                </a>
            </li>
        </ul>
    </div>
    
    </footer>

    <script type="module" src="static/js/main.js"></script> 
    <script type="module" src="static/js/dashboard.js"></script>
</body>
</html>